{"version":3,"file":"UpdatesWidget.js","mappings":"YAAA,IAAWA,EAAAA,EA2FRC,OAxFDC,MAAMC,cAAgBC,QAAQC,KAAKC,OAAO,CACxCC,QAAS,KACTC,MAAO,KACPC,KAAM,KACNC,UAAU,EAEVC,KAAM,SAAUC,EAAUC,GACxBC,KAAKP,QAAUP,EAAE,UAAYY,GAC7BE,KAAKN,MAAQM,KAAKP,QAAQQ,KAAK,eAC/BD,KAAKE,UAEAH,GACHC,KAAKG,iBAAgB,IAIzBD,QAAS,WACPF,KAAKL,KAAOK,KAAKN,MAAMO,KAAK,cAC5BD,KAAKI,YAAYJ,KAAKL,KAAM,SAAS,WACnCK,KAAKG,iBAAgB,OAIzBE,qBAAsB,WACpBL,KAAKJ,UAAW,EAChBI,KAAKP,QAAQa,SAAS,WACtBN,KAAKL,KAAKW,SAAS,aAGrBC,yBAA0B,WACxBP,KAAKJ,UAAW,EAChBI,KAAKP,QAAQe,YAAY,YAG3BL,gBAAiB,SAAUM,GACrBT,KAAKJ,WAITI,KAAKK,uBACLjB,MAAMsB,GAAGP,gBACPM,GACA,EACAT,KAAKW,eAAeC,KAAKZ,SAI7BW,eAAgB,SAAUE,GAItB,IAAIC,EAHNd,KAAKO,2BAEDM,EAAKE,OAILD,EADgB,GAAdD,EAAKE,MACM3B,MAAM4B,EAAE,MAAO,yBAEf5B,MAAM4B,EAAE,MAAO,6BAA8B,CACxDD,MAAOF,EAAKE,QAIhBf,KAAKN,MAAMuB,KACT,0BACEH,EACA,+BACA1B,MAAM8B,OAAO,qBACb,KACA9B,MAAM4B,EAAE,MAAO,iBALjB,cAUFhB,KAAKN,MAAMuB,KACT,0BACE7B,MAAM4B,EAAE,MAAO,gCADjB,oFAIE5B,MAAM4B,EAAE,MAAO,eACf,iBAGJhB,KAAKE,WAIPd,MAAMsB,GAAGS,0B","sources":["webpack:///./UpdatesWidget.js"],"sourcesContent":["(function ($) {\n  /** global: Craft */\n  /** global: Garnish */\n  Craft.UpdatesWidget = Garnish.Base.extend({\n    $widget: null,\n    $body: null,\n    $btn: null,\n    checking: false,\n\n    init: function (widgetId, cached) {\n      this.$widget = $('#widget' + widgetId);\n      this.$body = this.$widget.find('.body:first');\n      this.initBtn();\n\n      if (!cached) {\n        this.checkForUpdates(false);\n      }\n    },\n\n    initBtn: function () {\n      this.$btn = this.$body.find('.btn:first');\n      this.addListener(this.$btn, 'click', function () {\n        this.checkForUpdates(true);\n      });\n    },\n\n    lookLikeWereChecking: function () {\n      this.checking = true;\n      this.$widget.addClass('loading');\n      this.$btn.addClass('disabled');\n    },\n\n    dontLookLikeWereChecking: function () {\n      this.checking = false;\n      this.$widget.removeClass('loading');\n    },\n\n    checkForUpdates: function (forceRefresh) {\n      if (this.checking) {\n        return;\n      }\n\n      this.lookLikeWereChecking();\n      Craft.cp.checkForUpdates(\n        forceRefresh,\n        false,\n        this.showUpdateInfo.bind(this)\n      );\n    },\n\n    showUpdateInfo: function (info) {\n      this.dontLookLikeWereChecking();\n\n      if (info.total) {\n        var updateText;\n\n        if (info.total == 1) {\n          updateText = Craft.t('app', 'One update available!');\n        } else {\n          updateText = Craft.t('app', '{total} updates available!', {\n            total: info.total,\n          });\n        }\n\n        this.$body.html(\n          '<p class=\"centeralign\">' +\n            updateText +\n            ' <a class=\"go nowrap\" href=\"' +\n            Craft.getUrl('utilities/updates') +\n            '\">' +\n            Craft.t('app', 'Go to Updates') +\n            '</a>' +\n            '</p>'\n        );\n      } else {\n        this.$body.html(\n          '<p class=\"centeralign\">' +\n            Craft.t('app', 'Congrats! Youâ€™re up to date.') +\n            '</p>' +\n            '<p class=\"centeralign\"><button type=\"button\" class=\"btn\" data-icon=\"refresh\">' +\n            Craft.t('app', 'Check again') +\n            '</button></p>'\n        );\n\n        this.initBtn();\n      }\n\n      // Update the CP header badge\n      Craft.cp.updateUtilitiesBadge();\n    },\n  });\n})(jQuery);\n"],"names":["$","jQuery","Craft","UpdatesWidget","Garnish","Base","extend","$widget","$body","$btn","checking","init","widgetId","cached","this","find","initBtn","checkForUpdates","addListener","lookLikeWereChecking","addClass","dontLookLikeWereChecking","removeClass","forceRefresh","cp","showUpdateInfo","bind","info","updateText","total","t","html","getUrl","updateUtilitiesBadge"],"sourceRoot":""}